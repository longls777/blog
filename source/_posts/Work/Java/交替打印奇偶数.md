---
title: 交替打印奇偶数
tags: 
categories: Java
date: 2023-4-30 13:49:00
index_img: 
banner_img: 
math: true
---

## **ReentrantLock+Condition实现**

```java
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;


public class Test3 {
    private  ReentrantLock lock = new ReentrantLock();
    private  Condition odd = lock.newCondition();
    private  Condition even = lock.newCondition();
    private  volatile boolean flag = true;
    public  static void main(String[] args) {
        Test3 test = new Test3();
        Thread odd = test.new odd();
        Thread even = test.new even();
        odd.start();
        even.start();
    }
     class odd extends Thread{
        @Override
        public void run() {
            MyPrint();
        }
        private void MyPrint(){
            for(int i=1;i<100;i+=2){
                lock.lock();
                try {
                    while(!flag)
                        odd.await();
                    System.out.println(i);
                    flag = false;
                    even.signal();
                }catch (Exception e){
                    e.printStackTrace();
                }
                finally {
                    lock.unlock();
                }
            }
        }
    }
     class even extends Thread{
        @Override
        public void run() {
            MyPrint();
        }
        private void MyPrint(){
            for(int i=2;i<=100;i+=2){
                lock.lock();
                try {
                    while(flag)
                        even.await();
                    System.out.println(i);
                    flag = true;
                    odd.signal();
                }catch (Exception e){
                    e.printStackTrace();
                }
                finally {
                    lock.unlock();
                }
            }
        }
    }
}
```

## **wait()+notify()实现**

```java
public class test4 {
    private static Object o = new Object();
    private static int num = 0;
    private static volatile boolean flag = false;

    public static void main(String[] args) {
        Thread a = new Thread(new A());
        Thread b = new Thread(new B());
        a.start();
        b.start();
    }

    static class A implements Runnable{
        @Override
        public void run() {
            while(num<99){
                synchronized (o){
                    while(flag){
                        try{
                            o.wait();
                        }catch(Exception e){
                            e.printStackTrace();
                        }
                    }
                    num++;
                    System.out.println(num);
                    flag = true;
                    o.notify();
                }
            }
        }
    }

    static class B implements Runnable{
        @Override
        public void run() {
            while(num<=99){
                synchronized (o){
                    while(!flag){
                        try{
                            o.wait();
                        }catch(Exception e){
                            e.printStackTrace();
                        }
                    }
                    num++;
                    System.out.println(num);
                    flag = false;
                    o.notify();
                }
            }
        }
    }
}
```

